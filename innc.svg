from xml.dom import minidom
from pathlib import Path

svg_path = Path("/mnt/data/inc.svg")
output_path = Path("/mnt/data/inc_min.svg")

# Load the SVG
doc = minidom.parse(str(svg_path))

# Remove unnecessary whitespace and attributes
for elem in doc.getElementsByTagName("*"):
    # Remove id, class, style, inkscape, sodipodi, xml:space, data-* attributes
    remove_attrs = []
    for attr_name in elem.attributes.keys():
        if (attr_name.startswith("inkscape:") or 
            attr_name.startswith("sodipodi:") or
            attr_name.startswith("xml:") or
            attr_name.startswith("data-") or
            attr_name in ["id", "class", "style"]):
            remove_attrs.append(attr_name)
    for attr in remove_attrs:
        elem.removeAttribute(attr)

# Minify: remove extra whitespace between tags
minified_svg = doc.toxml()
doc.unlink()
minified_svg = "\n".join(line.strip() for line in minified_svg.splitlines() if line.strip())

# Save result
output_path.write_text(minified_svg, encoding="utf-8")

output_path